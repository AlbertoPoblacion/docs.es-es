---
title: Maximizar el rendimiento de representación 3D en WPF
ms.date: 03/30/2017
helpviewer_keywords:
- 3-D graphics [WPF]
ms.assetid: 4bcf949d-d92f-4d8d-8a9b-1e4c61b25bf6
ms.openlocfilehash: 8629748c37aae8e35bb928c5a8d5a9caa7046942
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/23/2019
ms.locfileid: "61785689"
---
# <a name="maximize-wpf-3d-performance"></a>Maximizar el rendimiento de representación 3D en WPF
Cuando utilice el [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] para crear controles 3D e incluir escenas 3D en sus aplicaciones, es importante tener en cuenta la optimización del rendimiento. En este tema se proporciona una lista de clases 3D y propiedades que tienen implicaciones de rendimiento para la aplicación, junto con recomendaciones para optimizar el rendimiento cuando se usan.  
  
 En este tema se da por supuesto un conocimiento avanzado de [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] características 3D. Las sugerencias en este documento se aplican a "nivel de representación 2", más o menos se define como el hardware que admite la versión 2.0 del sombreador de píxeles y la versión 2.0 del sombreador de vértices. Para obtener más información, consulte [niveles de representación de gráficos](../advanced/graphics-rendering-tiers.md).  
  
## <a name="performance-impact-high"></a>Impacto de rendimiento: Alto  
  
|Propiedad|Recomendación|  
|-|-|  
|<xref:System.Windows.Media.Brush>|Velocidad de pincel (de mayor a menor):<br /><br /> <xref:System.Windows.Media.SolidColorBrush><br /><br /> <xref:System.Windows.Media.LinearGradientBrush><br /><br /> <xref:System.Windows.Media.ImageBrush><br /><br /> <xref:System.Windows.Media.DrawingBrush> (en caché)<br /><br /> <xref:System.Windows.Media.VisualBrush> (en caché)<br /><br /> <xref:System.Windows.Media.RadialGradientBrush><br /><br /> <xref:System.Windows.Media.DrawingBrush> (sin almacenamiento en caché)<br /><br /> <xref:System.Windows.Media.VisualBrush> (sin almacenamiento en caché)|  
|<xref:System.Windows.UIElement.ClipToBoundsProperty>|Establecer `Viewport3D.ClipToBounds` en false siempre que no es necesario tener [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] explícitamente recortar el contenido de un <xref:System.Windows.Controls.Viewport3D> al rectángulo de Viewport3D. [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] recorte con suavizado de contorno puede ser muy lento y `ClipToBounds` habilitado de forma predeterminada (lento) en <xref:System.Windows.Controls.Viewport3D>.|  
|<xref:System.Windows.UIElement.IsHitTestVisible%2A>|Establecer `Viewport3D.IsHitTestVisible` en false cuando no necesite [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] a tener en cuenta el contenido de un <xref:System.Windows.Controls.Viewport3D> al mouse realizando la prueba de posicionamiento.  Prueba posicionamiento de 3D contenido se realiza en el software y puede ser lenta con mallas grandes. <xref:System.Windows.UIElement.IsHitTestVisible%2A> habilitado de forma predeterminada (lento) en <xref:System.Windows.Controls.Viewport3D>.|  
|<xref:System.Windows.Media.Media3D.GeometryModel3D>|Crear diferentes modelos únicamente cuando requieran materiales o transformaciones diferentes.  En caso contrario, intenta fusionar muchos <xref:System.Windows.Media.Media3D.GeometryModel3D> instancias con el mismo materiales y las transformaciones en unos pocos mayor <xref:System.Windows.Media.Media3D.GeometryModel3D> y <xref:System.Windows.Media.Media3D.MeshGeometry3D> instancias.|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Animación de mallas: cambiar los vértices individuales de una malla en un fotograma a fotograma, no siempre es eficaz en [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)].  Para minimizar el impacto de rendimiento de las notificaciones de cambio cuando se modifica cada vértice, desasocie la malla del árbol visual antes de realizar la modificación del vértice.  Una vez que se ha modificado la malla, adjuntarla al árbol visual.  Además, intente reducir el tamaño de las mallas que de este modo, se animará.|  
|Suavizado de contorno 3D|Para aumentar la velocidad de representación, deshabilite el muestreo múltiple en un <xref:System.Windows.Controls.Viewport3D> estableciendo la propiedad adjunta <xref:System.Windows.Media.RenderOptions.EdgeMode%2A> a `Aliased`.  De forma predeterminada, el suavizado de contorno 3D está deshabilitado en [!INCLUDE[TLA#tla_winxp](../../../../includes/tlasharptla-winxp-md.md)] y está habilitada en [!INCLUDE[TLA#tla_longhorn](../../../../includes/tlasharptla-longhorn-md.md)] con 4 muestras por píxel.|  
|Texto|Live texto en una escena 3D (live porque está en un <xref:System.Windows.Media.DrawingBrush> o <xref:System.Windows.Media.VisualBrush>) puede ser lento. Pruebe a utilizar las imágenes del texto en su lugar (a través de <xref:System.Windows.Media.Imaging.RenderTargetBitmap>) a menos que el texto cambiará.|  
|<xref:System.Windows.Media.TileBrush>|Si debe utilizar un <xref:System.Windows.Media.VisualBrush> o un <xref:System.Windows.Media.DrawingBrush> en una escena 3D porque el contenido del pincel no es estático, pruebe el pincel de almacenamiento en caché (estableciendo la propiedad adjunta <xref:System.Windows.Media.RenderOptions.CachingHint%2A> a `Cache`).  Establecer umbrales de invalidación de la escala mínima y máxima (con las propiedades adjuntas <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMinimum%2A> y <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMaximum%2A>) para que los pinceles almacenados en caché no se vuelven a generar con demasiada frecuencia, manteniendo el nivel de calidad deseado.  De forma predeterminada, <xref:System.Windows.Media.DrawingBrush> y <xref:System.Windows.Media.VisualBrush> no se almacenan en caché, lo que significa que cada vez que algo se pinta con el pincel que se tiene que ser vuelven a representar, todo el contenido del pincel en primer lugar se debe volver a representar en una superficie intermedia.|  
|<xref:System.Windows.Media.Effects.BitmapEffect>|<xref:System.Windows.Media.Effects.BitmapEffect> obliga a todo el contenido afectado al procesarse sin aceleración de hardware.  Para obtener el mejor rendimiento, no use <xref:System.Windows.Media.Effects.BitmapEffect>.|  
  
## <a name="performance-impact-medium"></a>Impacto de rendimiento: Medium  
  
|Propiedad|Recomendación|  
|-|-|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Cuando una malla se define como triángulos colindantes con vértices compartidos y esos vértices tienen la misma posición, normal y las coordenadas de textura, defina cada vértice compartido una sola vez y, a continuación, defina los triángulos por índice con <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>.|  
|<xref:System.Windows.Media.ImageBrush>|Intenta minimizar el tamaño de las texturas cuando tenga un control explícito sobre el tamaño (cuando se usa un <xref:System.Windows.Media.Imaging.RenderTargetBitmap> o un <xref:System.Windows.Media.ImageBrush>).  Tenga en cuenta que las texturas de resolución inferior puede disminuir la calidad visual, por lo que intenta encontrar el equilibrio adecuado entre rendimiento y calidad.|  
|Opacidad|Al representar contenido (por ejemplo, reflexiones) translúcido 3D, utilice las propiedades de opacidad en pinceles o materiales (a través de <xref:System.Windows.Media.Brush.Opacity%2A> o <xref:System.Windows.Media.Media3D.DiffuseMaterial.Color%2A>) en lugar de crear otro translúcido <xref:System.Windows.Controls.Viewport3D> estableciendo `Viewport3D.Opacity` en un valor menor que 1.|  
|<xref:System.Windows.Controls.Viewport3D>|Minimizar el número de <xref:System.Windows.Controls.Viewport3D> objetos que se usa en una escena.  Coloque varios modelos 3D en la misma Viewport3D, en lugar de crear instancias de Viewport3D independientes para cada modelo.|  
|<xref:System.Windows.Freezable>|Normalmente, es beneficioso reutilizar <xref:System.Windows.Media.Media3D.MeshGeometry3D>, <xref:System.Windows.Media.Media3D.GeometryModel3D>, pinceles y materiales.  Todos son multiparentable, ya que deriva `Freezable`.|  
|<xref:System.Windows.Freezable>|Llame a la <xref:System.Windows.Freezable.Freeze%2A> método en elementos inmovilizables cuando sus propiedades permanecerá sin cambios en la aplicación.  Inmovilización puede disminuir el espacio de trabajo y aumentar la velocidad.|  
|<xref:System.Windows.Media.Brush>|Use <xref:System.Windows.Media.ImageBrush> en lugar de <xref:System.Windows.Media.VisualBrush> o <xref:System.Windows.Media.DrawingBrush> cuando el contenido del pincel no cambiará.  Contenido 2D puede convertirse en un <xref:System.Windows.Controls.Image> a través de <xref:System.Windows.Media.Imaging.RenderTargetBitmap> y, a continuación, se utiliza en un <xref:System.Windows.Media.ImageBrush>.|  
|<xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A>|No use <xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A> a menos que realmente necesite ver las caras posteriores de su <xref:System.Windows.Media.Media3D.GeometryModel3D>.|  
|<xref:System.Windows.Media.Media3D.Light>|Velocidad de la luz (de mayor a menor):<br /><br /> <xref:System.Windows.Media.Media3D.AmbientLight><br /><br /> <xref:System.Windows.Media.Media3D.DirectionalLight><br /><br /> <xref:System.Windows.Media.Media3D.PointLight><br /><br /> <xref:System.Windows.Media.Media3D.SpotLight>|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Intentar mantener la malla en estos límites:<br /><br /> <xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>: 20.001 <xref:System.Windows.Media.Media3D.Point3D> instancias<br /><br /> <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>: 60,003 <xref:System.Int32> instancias|  
|<xref:System.Windows.Media.Media3D.Material>|Velocidad de material (de mayor a menor):<br /><br /> <xref:System.Windows.Media.Media3D.EmissiveMaterial><br /><br /> <xref:System.Windows.Media.Media3D.DiffuseMaterial><br /><br /> <xref:System.Windows.Media.Media3D.SpecularMaterial>|  
|<xref:System.Windows.Media.Brush>|[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] 3D no rechazar pinceles invisibles (pinceles de ambiente negros, pinceles claros, etc.) de una manera coherente.  Considere la posibilidad de omitir estas desde la escena.|  
|<xref:System.Windows.Media.Media3D.MaterialGroup>|Cada <xref:System.Windows.Media.Media3D.Material> en un <xref:System.Windows.Media.Media3D.MaterialGroup> provoca otro paso de representación, así como muchos de los materiales, incluso los materiales simple, puede aumentar considerablemente las demandas de relleno de la GPU.  Minimizar el número de materiales en su <xref:System.Windows.Media.Media3D.MaterialGroup>.|  
  
## <a name="performance-impact-low"></a>Impacto de rendimiento: Bajo  
  
|Propiedad|Recomendación|  
|-|-|  
|<xref:System.Windows.Media.Media3D.Transform3DGroup>|Cuando no necesite animación o enlace de datos, en lugar de usar un grupo de transformación que contiene varias transformaciones, utilice una sola <xref:System.Windows.Media.Media3D.MatrixTransform3D>, si se establece en el producto de todas las transformaciones en caso contrario, podría existir de forma independiente en el grupo de transformación.|  
|<xref:System.Windows.Media.Media3D.Light>|Minimizar el número de luces de la escena. Demasiadas luces en una escena forzará [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] retroceder a la representación de software.  Los límites son aproximadamente 110 <xref:System.Windows.Media.Media3D.DirectionalLight> objetos, 70 <xref:System.Windows.Media.Media3D.PointLight> objetos o 40 <xref:System.Windows.Media.Media3D.SpotLight> objetos.|  
|<xref:System.Windows.Media.Media3D.ModelVisual3D>|Separar mover objetos de objetos estáticos, colocándolos en independiente <xref:System.Windows.Media.Media3D.ModelVisual3D> instancias.  ModelVisual3D sea "mayor" que <xref:System.Windows.Media.Media3D.GeometryModel3D> porque almacena en memoria caché los límites transformados.  GeometryModel3D está optimizado para ser un modelo; ModelVisual3D está optimizado para ser un nodo de escena.  Use ModelVisual3D para colocar las instancias compartidas de GeometryModel3D en la escena.|  
|<xref:System.Windows.Media.Media3D.Light>|Minimizar el número de veces que cambie el número de luces de la escena.  Cada cambio del número de luces fuerza una regeneración del sombreador y recompilación, a menos que esa configuración ha existido anteriormente (y, por tanto, tenían su sombras en caché).|  
|Claro|Las luces negras no será visibles, pero agregará para representar la hora; Considere la posibilidad de omitirlas.|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Para minimizar el tiempo de construcción de colecciones grandes en [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], por ejemplo, un MeshGeometry3D <xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>, <xref:System.Windows.Media.Media3D.MeshGeometry3D.Normals%2A>, <xref:System.Windows.Media.Media3D.MeshGeometry3D.TextureCoordinates%2A>, y <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>, ajustar previamente el tamaño de las colecciones antes de la población de valor. Si es posible, pasar estructuras de datos rellenada previamente de constructores de las colecciones como matrices o listas.|  
  
## <a name="see-also"></a>Vea también

- [Información general sobre gráficos 3D](3-d-graphics-overview.md)
