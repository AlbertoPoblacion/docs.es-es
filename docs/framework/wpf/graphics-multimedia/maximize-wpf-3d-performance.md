---
title: Maximizar el rendimiento 3D
ms.date: 03/30/2017
helpviewer_keywords:
- 3D graphics [WPF]
ms.assetid: 4bcf949d-d92f-4d8d-8a9b-1e4c61b25bf6
ms.openlocfilehash: 3825ea8e57c6863e2ee654072efda623db21c2a8
ms.sourcegitcommit: 267d092663aba36b6b2ea853034470aea493bfae
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/21/2020
ms.locfileid: "80112003"
---
# <a name="maximize-wpf-3d-performance"></a>Maximizar el rendimiento de representación 3D en WPF
A medida [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] que se usa para crear controles 3D e incluir escenas 3D en las aplicaciones, es importante tener en cuenta la optimización del rendimiento. En este tema se proporciona una lista de clases 3D y propiedades que tienen implicaciones de rendimiento para la aplicación, junto con recomendaciones para optimizar el rendimiento cuando se usan.  
  
 En este tema se [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] supone una comprensión avanzada de las características 3D. Las sugerencias de este documento se aplican al "nivel de representación 2", definido aproximadamente como hardware que admite la versión 2.0 del sombreador de píxeles y la versión 2.0 del sombreador de vértices. Para obtener más información, consulte Niveles de representación de [gráficos](../advanced/graphics-rendering-tiers.md).  
  
## <a name="performance-impact-high"></a>Impacto en el rendimiento: Alto  
  
|Propiedad|Recomendación|  
|-|-|  
|<xref:System.Windows.Media.Brush>|Velocidad del pincel (más rápida a lenta):<br /><br /> <xref:System.Windows.Media.SolidColorBrush><br /><br /> <xref:System.Windows.Media.LinearGradientBrush><br /><br /> <xref:System.Windows.Media.ImageBrush><br /><br /> <xref:System.Windows.Media.DrawingBrush>(en caché)<br /><br /> <xref:System.Windows.Media.VisualBrush>(en caché)<br /><br /> <xref:System.Windows.Media.RadialGradientBrush><br /><br /> <xref:System.Windows.Media.DrawingBrush>(sin almacenar en caché)<br /><br /> <xref:System.Windows.Media.VisualBrush>(sin almacenar en caché)|  
|<xref:System.Windows.UIElement.ClipToBoundsProperty>|Establézcalo `Viewport3D.ClipToBounds` en false [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] siempre que no <xref:System.Windows.Controls.Viewport3D> necesite recortar explícitamente el contenido de a en el rectángulo de Viewport3D. [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]el recorte suavizado puede ser `ClipToBounds` muy lento y está habilitado <xref:System.Windows.Controls.Viewport3D>(lento) de forma predeterminada en .|  
|<xref:System.Windows.UIElement.IsHitTestVisible%2A>|Establézcalo `Viewport3D.IsHitTestVisible` en [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] false siempre que <xref:System.Windows.Controls.Viewport3D> no necesite tener en cuenta el contenido de un al realizar pruebas de posicionamiento del mouse.  El contenido 3D de pruebas de posicionamiento se realiza en software y puede ser lento con mallas grandes. <xref:System.Windows.UIElement.IsHitTestVisible%2A>está habilitado (lento) de <xref:System.Windows.Controls.Viewport3D>forma predeterminada en .|  
|<xref:System.Windows.Media.Media3D.GeometryModel3D>|Cree diferentes modelos solo cuando requieran diferentes Materiales o Transformaciones.  De lo contrario, intente <xref:System.Windows.Media.Media3D.GeometryModel3D> combinar muchas instancias con los mismos <xref:System.Windows.Media.Media3D.MeshGeometry3D> materiales y transformaciones en unas pocas instancias más grandes. <xref:System.Windows.Media.Media3D.GeometryModel3D>|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|La animación de malla (cambiar los vértices individuales de una [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]malla por fotograma) no siempre es eficaz en .  Para minimizar el impacto en el rendimiento de las notificaciones de cambio cuando se modifica cada vértice, desconecte la malla del árbol visual antes de realizar la modificación por vértice.  Una vez modificada la malla, vuelva a conectarla al árbol visual.  Además, intente minimizar el tamaño de las mallas que se animarán de esta manera.|  
|3D Antialiasing|Para aumentar la velocidad de <xref:System.Windows.Controls.Viewport3D> representación, deshabilite <xref:System.Windows.Media.RenderOptions.EdgeMode%2A> `Aliased`el muestreo múltiple en a estableciendo la propiedad adjunta en .  De forma predeterminada, el antialiasing 3D está habilitado en Windows con 4 muestras por píxel.|  
|Texto|El texto en vivo en una escena 3D (en vivo porque está en un <xref:System.Windows.Media.DrawingBrush> o <xref:System.Windows.Media.VisualBrush>) puede ser lento. Intente utilizar imágenes del <xref:System.Windows.Media.Imaging.RenderTargetBitmap>texto en su lugar (a través) a menos que el texto cambie.|  
|<xref:System.Windows.Media.TileBrush>|Si debe utilizar <xref:System.Windows.Media.VisualBrush> a <xref:System.Windows.Media.DrawingBrush> o a en una escena 3D porque el contenido del pincel no <xref:System.Windows.Media.RenderOptions.CachingHint%2A> `Cache`es estático, intente almacenar en caché el pincel (estableciendo la propiedad adjunta en ).  Establezca los umbrales de invalidación de <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMinimum%2A> escala <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMaximum%2A>mínima y máxima (con las propiedades adjuntas y ) para que los pinceles almacenados en caché no se regeneren con demasiada frecuencia, sin dejar de mantener el nivel de calidad deseado.  De forma <xref:System.Windows.Media.DrawingBrush> <xref:System.Windows.Media.VisualBrush> predeterminada, y no se almacenan en caché, lo que significa que cada vez que se tiene que volver a representar algo pintado con el pincel, primero se debe volver a representar todo el contenido del pincel en una superficie intermedia.|  
|<xref:System.Windows.Media.Effects.BitmapEffect>|<xref:System.Windows.Media.Effects.BitmapEffect>obliga a que todo el contenido afectado se represente sin aceleración de hardware.  Para obtener el mejor <xref:System.Windows.Media.Effects.BitmapEffect>rendimiento, no utilice .|  
  
## <a name="performance-impact-medium"></a>Impacto en el rendimiento: Medio  
  
|Propiedad|Recomendación|  
|-|-|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Cuando una malla se define como triángulos colindantes con vértices compartidos y esos vértices tienen las mismas coordenadas de posición, <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>normal y textura, defina cada vértice compartido una sola vez y, a continuación, defina los triángulos por índice con .|  
|<xref:System.Windows.Media.ImageBrush>|Intente minimizar los tamaños de textura cuando tenga un control <xref:System.Windows.Media.Imaging.RenderTargetBitmap> explícito sobre <xref:System.Windows.Media.ImageBrush>el tamaño (cuando utilice a y/o ).  Tenga en cuenta que las texturas de menor resolución pueden disminuir la calidad visual, así que trate de encontrar el equilibrio adecuado entre calidad y rendimiento.|  
|Opacidad|Al renderizar contenido 3D translúcido (como reflexiones), utilice las propiedades <xref:System.Windows.Media.Brush.Opacity%2A> de <xref:System.Windows.Media.Media3D.DiffuseMaterial.Color%2A>opacidad en pinceles o <xref:System.Windows.Controls.Viewport3D> materiales (vía o ) en lugar de crear un translúcido independiente estableciendo `Viewport3D.Opacity` un valor inferior a 1.|  
|<xref:System.Windows.Controls.Viewport3D>|Minimice el <xref:System.Windows.Controls.Viewport3D> número de objetos que está utilizando en una escena.  Coloque muchos modelos 3D en el mismo Viewport3D en lugar de crear instancias de Viewport3D independientes para cada modelo.|  
|<xref:System.Windows.Freezable>|Normalmente es beneficioso reutilizar <xref:System.Windows.Media.Media3D.MeshGeometry3D> <xref:System.Windows.Media.Media3D.GeometryModel3D>, , Pinceles y Materiales.  Todos son multiparentables ya `Freezable`que se derivan de .|  
|<xref:System.Windows.Freezable>|Llame <xref:System.Windows.Freezable.Freeze%2A> al método en Freezables cuando sus propiedades permanecerán sin cambios en la aplicación.  La congelación puede disminuir el conjunto de trabajo y aumentar la velocidad.|  
|<xref:System.Windows.Media.Brush>|Usar <xref:System.Windows.Media.ImageBrush> en <xref:System.Windows.Media.VisualBrush> <xref:System.Windows.Media.DrawingBrush> lugar de o cuando el contenido del pincel no cambiará.  El contenido 2D se <xref:System.Windows.Controls.Image> <xref:System.Windows.Media.Imaging.RenderTargetBitmap> puede convertir en <xref:System.Windows.Media.ImageBrush>una vía y luego se utiliza en un archivo .|  
|<xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A>|No lo <xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A> use a menos que realmente necesite <xref:System.Windows.Media.Media3D.GeometryModel3D>ver las caras traseras de su .|  
|<xref:System.Windows.Media.Media3D.Light>|Velocidad de la luz (más rápida a lenta):<br /><br /> <xref:System.Windows.Media.Media3D.AmbientLight><br /><br /> <xref:System.Windows.Media.Media3D.DirectionalLight><br /><br /> <xref:System.Windows.Media.Media3D.PointLight><br /><br /> <xref:System.Windows.Media.Media3D.SpotLight>|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Trate de mantener los tamaños de malla bajo estos límites:<br /><br /> <xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>: 20.001 <xref:System.Windows.Media.Media3D.Point3D> instancias<br /><br /> <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>: 60.003 <xref:System.Int32> instancias|  
|<xref:System.Windows.Media.Media3D.Material>|Velocidad del material (más rápida a lenta):<br /><br /> <xref:System.Windows.Media.Media3D.EmissiveMaterial><br /><br /> <xref:System.Windows.Media.Media3D.DiffuseMaterial><br /><br /> <xref:System.Windows.Media.Media3D.SpecularMaterial>|  
|<xref:System.Windows.Media.Brush>|[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]3D no se desvía de los pinceles invisibles (cepillos ambientales negros, pinceles claros, etc.) de forma coherente.  Considere omitirlos de su escena.|  
|<xref:System.Windows.Media.Media3D.MaterialGroup>|Cada <xref:System.Windows.Media.Media3D.Material> uno <xref:System.Windows.Media.Media3D.MaterialGroup> en un causa otro pase de renderizado, por lo que incluir muchos materiales, incluso materiales simples, puede aumentar drásticamente las demandas de relleno en su GPU.  Minimice el número <xref:System.Windows.Media.Media3D.MaterialGroup>de materiales en su archivo .|  
  
## <a name="performance-impact-low"></a>Impacto en el rendimiento: Bajo  
  
|Propiedad|Recomendación|  
|-|-|  
|<xref:System.Windows.Media.Media3D.Transform3DGroup>|Cuando no necesite animación o enlace de datos, en lugar de usar <xref:System.Windows.Media.Media3D.MatrixTransform3D>un grupo de transformación que contenga varias transformaciones, use una única , estableciendo que sea el producto de todas las transformaciones que de otro modo existirían independientemente en el grupo de transformación.|  
|<xref:System.Windows.Media.Media3D.Light>|Minimiza el número de luces de la escena. Demasiadas luces en una [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] escena obligarán a volver a la representación de software.  Los límites son aproximadamente <xref:System.Windows.Media.Media3D.DirectionalLight> 110 <xref:System.Windows.Media.Media3D.PointLight> objetos, <xref:System.Windows.Media.Media3D.SpotLight> 70 objetos o 40 objetos.|  
|<xref:System.Windows.Media.Media3D.ModelVisual3D>|Separe los objetos en movimiento <xref:System.Windows.Media.Media3D.ModelVisual3D> de los objetos estáticos poniéndolos en instancias independientes.  ModelVisual3D es "más pesado" que <xref:System.Windows.Media.Media3D.GeometryModel3D> porque almacena en caché los límites transformados.  GeometryModel3D está optimizado para ser un modelo; ModelVisual3D está optimizado para ser un nodo de escena.  Utilice ModelVisual3D para colocar instancias compartidas de GeometryModel3D en la escena.|  
|<xref:System.Windows.Media.Media3D.Light>|Minimice el número de veces que cambia el número de luces de la escena.  Cada cambio de recuento de luz fuerza una regeneración y recompilación del sombreador a menos que esa configuración haya existido anteriormente (y por lo tanto tenía su sombreador almacenado en caché).|  
|Ligero|Las luces negras no serán visibles, pero se añadirán al tiempo de renderización; considerar omitirlos.|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Para minimizar el tiempo de [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]construcción de colecciones grandes <xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>en <xref:System.Windows.Media.Media3D.MeshGeometry3D.Normals%2A> <xref:System.Windows.Media.Media3D.MeshGeometry3D.TextureCoordinates%2A>, <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>como un MeshGeometry3D, , , y , pre-dimensionar las colecciones antes de la población de valor. Si es posible, pase los constructores de las colecciones rellenando previamente estructuras de datos como matrices o listas.|  
  
## <a name="see-also"></a>Consulte también

- [Descripción general de los gráficos 3D](3-d-graphics-overview.md)
