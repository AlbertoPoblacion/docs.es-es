---
title: Maximizar el rendimiento de representación 3D en WPF
ms.date: 03/30/2017
helpviewer_keywords:
- 3-D graphics [WPF]
ms.assetid: 4bcf949d-d92f-4d8d-8a9b-1e4c61b25bf6
ms.openlocfilehash: e1a90406423e36dd10b8b108e076fe73f99947f0
ms.sourcegitcommit: 77e33b682db39955e331b8e8eda4ef1925a24e78
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/29/2019
ms.locfileid: "70133845"
---
# <a name="maximize-wpf-3d-performance"></a>Maximizar el rendimiento de representación 3D en WPF
A medida que se [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] usa para compilar controles 3D e incluir escenas 3D en las aplicaciones, es importante tener en cuenta la optimización del rendimiento. En este tema se proporciona una lista de las clases y propiedades 3D que tienen implicaciones de rendimiento para la aplicación, junto con recomendaciones para optimizar el rendimiento cuando se usan.  
  
 En este tema se da por supuesto [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] un conocimiento avanzado de las características 3D. Las sugerencias de este documento se aplican a "nivel de representación 2", que se define aproximadamente como hardware que admite el sombreador de píxeles versión 2,0 y la versión 2,0 del sombreador de vértices. Para obtener más información, consulte [niveles de representación de gráficos](../advanced/graphics-rendering-tiers.md).  
  
## <a name="performance-impact-high"></a>Impacto en el rendimiento: Alto  
  
|Propiedad|Recomendación|  
|-|-|  
|<xref:System.Windows.Media.Brush>|Velocidad del pincel (más rápido a más lenta):<br /><br /> <xref:System.Windows.Media.SolidColorBrush><br /><br /> <xref:System.Windows.Media.LinearGradientBrush><br /><br /> <xref:System.Windows.Media.ImageBrush><br /><br /> <xref:System.Windows.Media.DrawingBrush>en caché<br /><br /> <xref:System.Windows.Media.VisualBrush>en caché<br /><br /> <xref:System.Windows.Media.RadialGradientBrush><br /><br /> <xref:System.Windows.Media.DrawingBrush>no almacenados en<br /><br /> <xref:System.Windows.Media.VisualBrush>no almacenados en|  
|<xref:System.Windows.UIElement.ClipToBoundsProperty>|Establézcalo `Viewport3D.ClipToBounds` en false siempre que no sea necesario [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] recortar explícitamente el contenido de <xref:System.Windows.Controls.Viewport3D> un en el rectángulo Viewport3D's. [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]el recorte antialias puede ser muy lento y `ClipToBounds` está habilitado (lento) de forma <xref:System.Windows.Controls.Viewport3D>predeterminada en.|  
|<xref:System.Windows.UIElement.IsHitTestVisible%2A>|Establézcalo `Viewport3D.IsHitTestVisible` en false siempre que no necesite [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] <xref:System.Windows.Controls.Viewport3D> tener en cuenta el contenido de cuando realice la prueba de posicionamiento del mouse.  La prueba de posicionamiento de contenido 3D se realiza en el software y puede ser lenta con mallas grandes. <xref:System.Windows.UIElement.IsHitTestVisible%2A>está habilitado (lento) de forma <xref:System.Windows.Controls.Viewport3D>predeterminada en.|  
|<xref:System.Windows.Media.Media3D.GeometryModel3D>|Cree modelos diferentes solo cuando requieran materiales o transformaciones diferentes.  De lo contrario, intente fusionar <xref:System.Windows.Media.Media3D.GeometryModel3D> muchas instancias con los mismos materiales y transformaciones en unas cuantas <xref:System.Windows.Media.Media3D.GeometryModel3D> instancias <xref:System.Windows.Media.Media3D.MeshGeometry3D> y más grandes.|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Animación de malla: cambiar los vértices individuales de una malla en cada fotograma: no siempre es eficaz en [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)].  Para minimizar el impacto en el rendimiento de las notificaciones de cambios cuando se modifica cada vértice, Desasocie la malla del árbol visual antes de realizar la modificación por vértice.  Una vez que se haya modificado la malla, vuelva a adjuntarla al árbol visual.  Además, intente minimizar el tamaño de las mallas que se animarán de esta manera.|  
|suavizado de contorno 3D|Para aumentar la velocidad de representación, deshabilite el muestreo <xref:System.Windows.Controls.Viewport3D> múltiple en una estableciendo la <xref:System.Windows.Media.RenderOptions.EdgeMode%2A> propiedad `Aliased`adjunta en.  De forma predeterminada, el suavizado de contorno 3D está habilitado en Windows con 4 muestras por píxel.|  
|Text|El texto en directo en una escena 3D (en vivo porque está <xref:System.Windows.Media.DrawingBrush> en <xref:System.Windows.Media.VisualBrush>una o) puede ser lento. Intente usar imágenes del texto en su lugar (a través <xref:System.Windows.Media.Imaging.RenderTargetBitmap>de) a menos que el texto cambie.|  
|<xref:System.Windows.Media.TileBrush>|Si <xref:System.Windows.Media.VisualBrush> debe usar <xref:System.Windows.Media.DrawingBrush> o en una escena 3D porque el contenido del pincel no es estático, intente almacenar en caché el pincel (estableciendo la propiedad <xref:System.Windows.Media.RenderOptions.CachingHint%2A> adjunta en `Cache`).  Establezca los umbrales de invalidación de escala mínima y máxima (con las propiedades <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMinimum%2A> adjuntas y <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMaximum%2A>) para que los pinceles en caché no se vuelvan a generar con demasiada frecuencia, manteniendo el nivel de calidad deseado.  De forma predeterminada <xref:System.Windows.Media.DrawingBrush> , <xref:System.Windows.Media.VisualBrush> y no se almacenan en caché, lo que significa que cada vez que algo pintado con el pincel tiene que volver a representarse, todo el contenido del pincel se debe volver a representar primero en una superficie intermedia.|  
|<xref:System.Windows.Media.Effects.BitmapEffect>|<xref:System.Windows.Media.Effects.BitmapEffect>obliga a que se represente todo el contenido afectado sin aceleración de hardware.  Para obtener el mejor rendimiento, no <xref:System.Windows.Media.Effects.BitmapEffect>use.|  
  
## <a name="performance-impact-medium"></a>Impacto en el rendimiento: Mediano  
  
|Propiedad|Recomendación|  
|-|-|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Cuando una malla se define como triángulos colindantes con vértices compartidos y esos vértices tienen la misma posición, normales y coordenadas de textura, defina cada vértice compartido solo una vez y, a <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>continuación, defina los triángulos por índice con.|  
|<xref:System.Windows.Media.ImageBrush>|Intente minimizar los tamaños de textura cuando tenga un control explícito sobre el tamaño (cuando esté usando un <xref:System.Windows.Media.Imaging.RenderTargetBitmap> y/o un <xref:System.Windows.Media.ImageBrush>).  Tenga en cuenta que las texturas de resolución inferior pueden reducir la calidad visual, así que intente encontrar el equilibrio adecuado entre calidad y rendimiento.|  
|Opacidad|Al representar contenido 3D translúcido (como reflexiones), use las propiedades de opacidad de los pinceles <xref:System.Windows.Media.Brush.Opacity%2A> o <xref:System.Windows.Media.Media3D.DiffuseMaterial.Color%2A>materiales (a través de o) en <xref:System.Windows.Controls.Viewport3D> lugar de `Viewport3D.Opacity` crear un valor de translúcido separado estableciendo en un valor menor que 1.|  
|<xref:System.Windows.Controls.Viewport3D>|Minimice el número de <xref:System.Windows.Controls.Viewport3D> objetos que está usando en una escena.  Coloque muchos modelos 3D en el mismo Viewport3D en lugar de crear instancias de Viewport3D independientes para cada modelo.|  
|<xref:System.Windows.Freezable>|Por lo general, es beneficioso <xref:System.Windows.Media.Media3D.GeometryModel3D>reutilizar <xref:System.Windows.Media.Media3D.MeshGeometry3D>,, pinceles y materiales.  Todos son multiprimarios, ya que se derivan de `Freezable`.|  
|<xref:System.Windows.Freezable>|Llame al <xref:System.Windows.Freezable.Freeze%2A> método en elementos inmovilizables cuando sus propiedades permanezcan sin cambios en la aplicación.  La inmovilización puede reducir el espacio de trabajo y aumentar la velocidad.|  
|<xref:System.Windows.Media.Brush>|Use <xref:System.Windows.Media.ImageBrush> en lugar de <xref:System.Windows.Media.VisualBrush> o <xref:System.Windows.Media.DrawingBrush> cuando el contenido del pincel no cambie.  el contenido 2D se puede convertir en <xref:System.Windows.Controls.Image> un <xref:System.Windows.Media.Imaging.RenderTargetBitmap> a través de y, <xref:System.Windows.Media.ImageBrush>a continuación, usarse en un.|  
|<xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A>|No use <xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A> a menos que realmente necesite ver las caras del fondo de <xref:System.Windows.Media.Media3D.GeometryModel3D>su.|  
|<xref:System.Windows.Media.Media3D.Light>|Velocidad ligera (más rápida a más lenta):<br /><br /> <xref:System.Windows.Media.Media3D.AmbientLight><br /><br /> <xref:System.Windows.Media.Media3D.DirectionalLight><br /><br /> <xref:System.Windows.Media.Media3D.PointLight><br /><br /> <xref:System.Windows.Media.Media3D.SpotLight>|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Intente mantener los tamaños de malla en estos límites:<br /><br /> <xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>: 20.001 <xref:System.Windows.Media.Media3D.Point3D> instancias de<br /><br /> <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>: 60.003 <xref:System.Int32> instancias de|  
|<xref:System.Windows.Media.Media3D.Material>|Velocidad del material (más rápida a más lenta):<br /><br /> <xref:System.Windows.Media.Media3D.EmissiveMaterial><br /><br /> <xref:System.Windows.Media.Media3D.DiffuseMaterial><br /><br /> <xref:System.Windows.Media.Media3D.SpecularMaterial>|  
|<xref:System.Windows.Media.Brush>|[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]3D no deja de elegir pinceles invisibles (pinceles de ambiente negros, pinceles claros, etc.) de forma coherente.  Considere la posibilidad de omitirlos de la escena.|  
|<xref:System.Windows.Media.Media3D.MaterialGroup>|Cada <xref:System.Windows.Media.Media3D.Material> una<xref:System.Windows.Media.Media3D.MaterialGroup> de ellas produce otro paso de representación, por lo que incluir muchos materiales, incluso materiales sencillos, puede aumentar drásticamente las demandas de relleno en la GPU.  Minimice el número de materiales en su <xref:System.Windows.Media.Media3D.MaterialGroup>.|  
  
## <a name="performance-impact-low"></a>Impacto en el rendimiento: Bajo  
  
|Propiedad|Recomendación|  
|-|-|  
|<xref:System.Windows.Media.Media3D.Transform3DGroup>|Cuando no necesite animación o enlace de datos, en lugar de utilizar un grupo de transformación que contenga varias transformaciones, <xref:System.Windows.Media.Media3D.MatrixTransform3D>use un único, estableciendo que sea el producto de todas las transformaciones que, de otro modo, existen de forma independiente en el grupo de transformación.|  
|<xref:System.Windows.Media.Media3D.Light>|Minimice el número de luces de la escena. Demasiadas luces en una escena obligarán [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] a revertirse a la representación de software.  Los límites son aproximadamente 110 <xref:System.Windows.Media.Media3D.DirectionalLight> objetos, 70 <xref:System.Windows.Media.Media3D.PointLight> objetos o 40 <xref:System.Windows.Media.Media3D.SpotLight> objetos.|  
|<xref:System.Windows.Media.Media3D.ModelVisual3D>|Separe los objetos móviles de los objetos estáticos colocándolos en <xref:System.Windows.Media.Media3D.ModelVisual3D> instancias independientes.  ModelVisual3D es "pesado" que <xref:System.Windows.Media.Media3D.GeometryModel3D> porque almacena en caché los límites transformados.  GeometryModel3D está optimizado para ser un modelo; ModelVisual3D está optimizado para ser un nodo de escena.  Use ModelVisual3D para colocar instancias compartidas de GeometryModel3D en la escena.|  
|<xref:System.Windows.Media.Media3D.Light>|Minimice el número de veces que cambia el número de luces de la escena.  Cada cambio de recuento ligero fuerza una regeneración y recompilación del sombreador a menos que la configuración haya existido anteriormente (y, por tanto, su sombreador se almacenó en caché).|  
|Claro|Las luces negras no estarán visibles, pero se agregarán al tiempo de representación; considere la posibilidad de omitirlos.|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Para minimizar el tiempo de construcción de colecciones grandes [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]en, como MeshGeometry3D's <xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>, <xref:System.Windows.Media.Media3D.MeshGeometry3D.Normals%2A>, <xref:System.Windows.Media.Media3D.MeshGeometry3D.TextureCoordinates%2A>y <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>, ajuste el tamaño de las colecciones antes del rellenado de valores. Si es posible, pase a las estructuras de datos rellenados previamente de los constructores de colecciones como matrices o listas.|  
  
## <a name="see-also"></a>Vea también

- [Información general sobre gráficos 3D](3-d-graphics-overview.md)
