---
title: Maximizar el rendimiento 3D
ms.date: 03/30/2017
helpviewer_keywords:
- 3-D graphics [WPF]
ms.assetid: 4bcf949d-d92f-4d8d-8a9b-1e4c61b25bf6
ms.openlocfilehash: 414a4677a1e05cd69c382e35194328d6ce1bddf9
ms.sourcegitcommit: de17a7a0a37042f0d4406f5ae5393531caeb25ba
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/24/2020
ms.locfileid: "76744599"
---
# <a name="maximize-wpf-3d-performance"></a>Maximizar el rendimiento de representación 3D en WPF
Al usar el [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] para compilar controles 3D e incluir escenas 3D en las aplicaciones, es importante tener en cuenta la optimización del rendimiento. En este tema se proporciona una lista de las clases y propiedades 3D que tienen implicaciones de rendimiento para la aplicación, junto con recomendaciones para optimizar el rendimiento cuando se usan.  
  
 En este tema se da por supuesto un conocimiento avanzado de [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] características 3D. Las sugerencias de este documento se aplican a "nivel de representación 2", que se define aproximadamente como hardware que admite el sombreador de píxeles versión 2,0 y la versión 2,0 del sombreador de vértices. Para obtener más información, consulte [niveles de representación de gráficos](../advanced/graphics-rendering-tiers.md).  
  
## <a name="performance-impact-high"></a>Impacto en el rendimiento: alto  
  
|Propiedad|Recomendación|  
|-|-|  
|<xref:System.Windows.Media.Brush>|Velocidad del pincel (más rápido a más lenta):<br /><br /> <xref:System.Windows.Media.SolidColorBrush><br /><br /> <xref:System.Windows.Media.LinearGradientBrush><br /><br /> <xref:System.Windows.Media.ImageBrush><br /><br /> <xref:System.Windows.Media.DrawingBrush> (en caché)<br /><br /> <xref:System.Windows.Media.VisualBrush> (en caché)<br /><br /> <xref:System.Windows.Media.RadialGradientBrush><br /><br /> <xref:System.Windows.Media.DrawingBrush> (no almacenado en caché)<br /><br /> <xref:System.Windows.Media.VisualBrush> (no almacenado en caché)|  
|<xref:System.Windows.UIElement.ClipToBoundsProperty>|Establezca `Viewport3D.ClipToBounds` en false siempre que no necesite [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] recortar explícitamente el contenido de una <xref:System.Windows.Controls.Viewport3D> al rectángulo Viewport3D's. [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] el recorte antialias puede ser muy lento y `ClipToBounds` está habilitado (lento) de forma predeterminada en <xref:System.Windows.Controls.Viewport3D>.|  
|<xref:System.Windows.UIElement.IsHitTestVisible%2A>|Establezca `Viewport3D.IsHitTestVisible` en false siempre que no necesite [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] para considerar el contenido de un <xref:System.Windows.Controls.Viewport3D> al realizar la prueba de posicionamiento del mouse.  La prueba de posicionamiento de contenido 3D se realiza en el software y puede ser lenta con mallas grandes. de forma predeterminada, <xref:System.Windows.UIElement.IsHitTestVisible%2A> está habilitado (lento) en <xref:System.Windows.Controls.Viewport3D>.|  
|<xref:System.Windows.Media.Media3D.GeometryModel3D>|Cree modelos diferentes solo cuando requieran materiales o transformaciones diferentes.  De lo contrario, intente fusionar muchas instancias de <xref:System.Windows.Media.Media3D.GeometryModel3D> con los mismos materiales y transformaciones en algunas instancias de <xref:System.Windows.Media.Media3D.GeometryModel3D> y <xref:System.Windows.Media.Media3D.MeshGeometry3D> más grandes.|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Animación de malla: cambiar los vértices individuales de una malla en cada fotograma: no siempre es eficaz en [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)].  Para minimizar el impacto en el rendimiento de las notificaciones de cambios cuando se modifica cada vértice, Desasocie la malla del árbol visual antes de realizar la modificación por vértice.  Una vez que se haya modificado la malla, vuelva a adjuntarla al árbol visual.  Además, intente minimizar el tamaño de las mallas que se animarán de esta manera.|  
|suavizado de contorno 3D|Para aumentar la velocidad de representación, deshabilite el muestreo múltiple en un <xref:System.Windows.Controls.Viewport3D> estableciendo la propiedad adjunta <xref:System.Windows.Media.RenderOptions.EdgeMode%2A> en `Aliased`.  De forma predeterminada, el suavizado de contorno 3D está habilitado en Windows con 4 muestras por píxel.|  
|Texto|El texto en directo de una escena 3D (en vivo porque está en un <xref:System.Windows.Media.DrawingBrush> o <xref:System.Windows.Media.VisualBrush>) puede ser lento. Intente usar imágenes del texto en su lugar (a través de <xref:System.Windows.Media.Imaging.RenderTargetBitmap>) a menos que el texto cambie.|  
|<xref:System.Windows.Media.TileBrush>|Si debe usar un <xref:System.Windows.Media.VisualBrush> o un <xref:System.Windows.Media.DrawingBrush> en una escena 3D porque el contenido del pincel no es estático, intente almacenar en caché el pincel (estableciendo la propiedad adjunta <xref:System.Windows.Media.RenderOptions.CachingHint%2A> en `Cache`).  Establezca los umbrales de invalidación de escala mínima y máxima (con las propiedades adjuntas <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMinimum%2A> y <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMaximum%2A>) para que los pinceles almacenados en caché no se vuelvan a generar con demasiada frecuencia, manteniendo el nivel de calidad deseado.  De forma predeterminada, <xref:System.Windows.Media.DrawingBrush> y <xref:System.Windows.Media.VisualBrush> no se almacenan en caché, lo que significa que cada vez que se debe volver a representar algo pintado con el pincel, todo el contenido del pincel se debe volver a representar en una superficie intermedia.|  
|<xref:System.Windows.Media.Effects.BitmapEffect>|<xref:System.Windows.Media.Effects.BitmapEffect> fuerza la representación de todo el contenido afectado sin aceleración de hardware.  Para obtener el mejor rendimiento, no utilice <xref:System.Windows.Media.Effects.BitmapEffect>.|  
  
## <a name="performance-impact-medium"></a>Impacto en el rendimiento: medio  
  
|Propiedad|Recomendación|  
|-|-|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Cuando una malla se define como triángulos colindantes con vértices compartidos y esos vértices tienen la misma posición, normales y coordenadas de textura, defina cada vértice compartido solo una vez y, a continuación, defina los triángulos por índice con <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>.|  
|<xref:System.Windows.Media.ImageBrush>|Intente minimizar los tamaños de textura cuando tenga un control explícito sobre el tamaño (cuando esté usando un <xref:System.Windows.Media.Imaging.RenderTargetBitmap> y/o un <xref:System.Windows.Media.ImageBrush>).  Tenga en cuenta que las texturas de resolución inferior pueden reducir la calidad visual, así que intente encontrar el equilibrio adecuado entre calidad y rendimiento.|  
|Opacidad|Al representar contenido 3D translúcido (como reflexiones), use las propiedades de opacidad de los pinceles o materiales (a través de <xref:System.Windows.Media.Brush.Opacity%2A> o <xref:System.Windows.Media.Media3D.DiffuseMaterial.Color%2A>) en lugar de crear un <xref:System.Windows.Controls.Viewport3D> translúcido independiente estableciendo `Viewport3D.Opacity` en un valor menor que 1.|  
|<xref:System.Windows.Controls.Viewport3D>|Minimice el número de objetos de <xref:System.Windows.Controls.Viewport3D> que está usando en una escena.  Coloque muchos modelos 3D en el mismo Viewport3D en lugar de crear instancias de Viewport3D independientes para cada modelo.|  
|<xref:System.Windows.Freezable>|Normalmente, es beneficioso reutilizar <xref:System.Windows.Media.Media3D.MeshGeometry3D>, <xref:System.Windows.Media.Media3D.GeometryModel3D>, pinceles y materiales.  Todos son multiprimarios, ya que se derivan de `Freezable`.|  
|<xref:System.Windows.Freezable>|Llame al método <xref:System.Windows.Freezable.Freeze%2A> en elementos inmovilizables cuando sus propiedades permanezcan sin cambios en la aplicación.  La inmovilización puede reducir el espacio de trabajo y aumentar la velocidad.|  
|<xref:System.Windows.Media.Brush>|Use <xref:System.Windows.Media.ImageBrush> en lugar de <xref:System.Windows.Media.VisualBrush> o <xref:System.Windows.Media.DrawingBrush> cuando el contenido del pincel no cambie.  el contenido 2D se puede convertir en un <xref:System.Windows.Controls.Image> a través de <xref:System.Windows.Media.Imaging.RenderTargetBitmap> y, después, se usa en un <xref:System.Windows.Media.ImageBrush>.|  
|<xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A>|No use <xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A> a menos que realmente necesite ver las caras trasvueltas de la <xref:System.Windows.Media.Media3D.GeometryModel3D>.|  
|<xref:System.Windows.Media.Media3D.Light>|Velocidad ligera (más rápida a más lenta):<br /><br /> <xref:System.Windows.Media.Media3D.AmbientLight><br /><br /> <xref:System.Windows.Media.Media3D.DirectionalLight><br /><br /> <xref:System.Windows.Media.Media3D.PointLight><br /><br /> <xref:System.Windows.Media.Media3D.SpotLight>|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Intente mantener los tamaños de malla en estos límites:<br /><br /> <xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>: 20.001 <xref:System.Windows.Media.Media3D.Point3D> instancias<br /><br /> <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>: 60.003 <xref:System.Int32> instancias|  
|<xref:System.Windows.Media.Media3D.Material>|Velocidad del material (más rápida a más lenta):<br /><br /> <xref:System.Windows.Media.Media3D.EmissiveMaterial><br /><br /> <xref:System.Windows.Media.Media3D.DiffuseMaterial><br /><br /> <xref:System.Windows.Media.Media3D.SpecularMaterial>|  
|<xref:System.Windows.Media.Brush>|[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] 3D no deja de participar en los pinceles invisibles (pinceles de ambiente negros, pinceles claros, etc.) de una manera coherente.  Considere la posibilidad de omitirlos de la escena.|  
|<xref:System.Windows.Media.Media3D.MaterialGroup>|Cada <xref:System.Windows.Media.Media3D.Material> en un <xref:System.Windows.Media.Media3D.MaterialGroup> produce otro paso de representación, por lo que incluir muchos materiales, incluso materiales sencillos, puede aumentar drásticamente las demandas de relleno en la GPU.  Minimice el número de materiales en el <xref:System.Windows.Media.Media3D.MaterialGroup>.|  
  
## <a name="performance-impact-low"></a>Impacto en el rendimiento: bajo  
  
|Propiedad|Recomendación|  
|-|-|  
|<xref:System.Windows.Media.Media3D.Transform3DGroup>|Cuando no necesite animación o enlace de datos, en lugar de utilizar un grupo de transformación que contenga varias transformaciones, utilice un solo <xref:System.Windows.Media.Media3D.MatrixTransform3D>, estableciendo que sea el producto de todas las transformaciones que, de otro modo, existen de forma independiente en el grupo de transformación.|  
|<xref:System.Windows.Media.Media3D.Light>|Minimice el número de luces de la escena. Demasiadas luces en una escena forzarán [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] a revertir a la representación de software.  Los límites son aproximadamente 110 objetos <xref:System.Windows.Media.Media3D.DirectionalLight>, 70 <xref:System.Windows.Media.Media3D.PointLight> objetos o 40 <xref:System.Windows.Media.Media3D.SpotLight> objetos.|  
|<xref:System.Windows.Media.Media3D.ModelVisual3D>|Separe los objetos móviles de los objetos estáticos colocándolos en instancias de <xref:System.Windows.Media.Media3D.ModelVisual3D> independientes.  ModelVisual3D es "pesado" que <xref:System.Windows.Media.Media3D.GeometryModel3D> porque almacena en caché los límites transformados.  GeometryModel3D está optimizado para ser un modelo; ModelVisual3D está optimizado para ser un nodo de escena.  Use ModelVisual3D para colocar instancias compartidas de GeometryModel3D en la escena.|  
|<xref:System.Windows.Media.Media3D.Light>|Minimice el número de veces que cambia el número de luces de la escena.  Cada cambio de recuento ligero fuerza una regeneración y recompilación del sombreador a menos que la configuración haya existido anteriormente (y, por tanto, su sombreador se almacenó en caché).|  
|Ligero|Las luces negras no estarán visibles, pero se agregarán al tiempo de representación; considere la posibilidad de omitirlos.|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Para minimizar el tiempo de construcción de colecciones grandes en [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], como un MeshGeometry3D's <xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>, <xref:System.Windows.Media.Media3D.MeshGeometry3D.Normals%2A>, <xref:System.Windows.Media.Media3D.MeshGeometry3D.TextureCoordinates%2A>y <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>, ajuste el tamaño de las colecciones antes del rellenado de valores. Si es posible, pase a las estructuras de datos rellenados previamente de los constructores de colecciones como matrices o listas.|  
  
## <a name="see-also"></a>Consulte también

- [Información general sobre gráficos 3D](3-d-graphics-overview.md)
